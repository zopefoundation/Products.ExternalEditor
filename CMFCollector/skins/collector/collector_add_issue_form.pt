<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master">

<span tal:replace="nothing">
  Template description: Form for submitting new collector issues.
</span>

<body>

<div metal:fill-slot="header">

  <div metal:use-macro="here/collector_macros/macros/collector_header">
    COLLECTOR HEADER
  </div>

</div>

<div metal:fill-slot="main">	  

  <h2> Submit New Issue </h2>
 
  <div tal:define="member python:
                          here.portal_membership.getAuthenticatedMember();
                   authenticated python: member.has_role('Authenticated')">

  <form method="POST" enctype="multipart/form-data"
        action="collector_add_issue">

      <table class="FormLayout">

       <tr valign="top">
        <th align="right"> Issue Title </th>
        <td>
         <input type="text" name="title" value="" size="40">
        </td>
        <td align="right">
            <input type=hidden name="security_related:boolean" value="">
            <input type=checkbox name="security_related:boolean">
        </td>
        <td valign="top">
            Security Related?
            <br>
              <font size="-1" color="gray">
                If checked, issue will <em>not</em> be publicly visible until
                completed. 
              </font>
        </td>
       </tr>

        <tr>
          <th valign="middle" align="right"> Submitter </th>
          <td>
            <input type="text" name="submitter" value="" size="20"
                   tal:attributes="value python:
                                         getattr(member, 'full_name', '')">
          </td>
          <th valign="middle" align="right"
              tal:condition="authenticated"> Email </th>
          <td tal:content="python: member.getProperty('email', '')"
              tal:condition="authenticated">
            EMAIL ADDR
          </td>
        </tr>

        <tr tal:condition="not: authenticated">
          <td> &nbsp;
          </td>
          <td colspan="4">
            <font color="red"> <em> If you wish to be able to followup to your
              issue, receive email notifications about its conduct, etc.,
              you must log in. </em>
            </font>
          </td>
        </tr>

       <tr valign="top">
        <th align="right"> Topic </th>
        <td>
          <table>
            <tr>
              <td>
                <select name="topic">
                  <option value=""
                          tal:repeat="it here/topics"
                          tal:attributes="value it"
                          tal:content="it"></option>
                </select>
                <th align="right"> Version </th>
                <td>
                 <select name="reported_version">
                   <option value=""
                           tal:repeat="it here/versions"
                           tal:attributes="value it"
                           tal:content="it"></option>
                 </select>
                </td>
              </tr>
            </table>
        </td>
        <th align="right"> Importance </th>
        <td>
         <select name="importance">
           <option value=""
                   tal:repeat="it here/importances"
                   tal:attributes="value it"
                   tal:content="it"></option>
         </select>
        </td>
       </tr>

       <tr valign="top">
        <th align="right"> Classification </th>
        <td>
         <select name="classification">
           <option value=""
                   tal:repeat="it here/classifications"
                   tal:attributes="value it"
                   tal:content="it"></option>
         </select>
        </td>
        <th align="right"> Severity </th>
        <td>
         <select name="severity">
           <option value=""
                   tal:repeat="it here/severities"
                   tal:attributes="value it"
                   tal:content="it"></option>
         </select>
        </td>
       </tr>

       <tr valign="top">
        <th align="right"> </th>
        <td colspan=3>
          <font color="gray" size="-1">
            Provide pertinent details to help the supporters pinpoint
            the causes.
          </font>
        </td>

       <tr valign="top">
          <th align="right"> Description </th>
          <td colspan="3">
            <textarea name="description:text" rows="8" cols="60"></textarea>
          </td>
       </tr>

       <tr>
        <th > Other Version Info </th>
        <td>
            <textarea name="other_version_info" rows="3" cols="30"></textarea>
        </td>
        <td colspan="2">
          <font color="gray">
            <span tal:replace="here/other_versions_spiel"></span>
          </font>
        </td>
       </tr>

       <tr>
         <th> Upload </th>
         <td colspan="3">

    <div metal:use-macro="here/collector_macros/macros/add_artifacts_table">
       add_artifacts_table_row
    </div>

        </td>
       </tr>

       <tr valign="top">
        <td> <br> </td>
        <td>
         <input type="submit" value=" Submit ">
        </td>
       </tr>

      </table>

    </form>

  </div>

</div>
</body>
</html>

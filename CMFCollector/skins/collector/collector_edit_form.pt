<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master">

<span tal:replace="nothing">
  Template description: Form for configuring the collector.
</span>

<body>

<div metal:fill-slot="header">

  <div metal:use-macro="here/collector_macros/macros/collector_header">
    COLLECTOR HEADER
  </div>

</div>

<div metal:fill-slot="main">	  
<h2> Configure Collector </h2>
 
<form action="collector_edit" method="post">
<table class="FormLayout" width="100%">
 
 <tr valign="top">
  <th align="right"> Title
  </th>
  <td colspan="2">
   <input type="text"
          name="title"
          value=""
     tal:attributes="value here/title"
          size="45">
  </td>
  <td> Abbreviation:
   <input type="text"
          name="abbrev"
          value=""
      tal:attributes="value here/abbrev|nothing"
          size="5">
  </td>
 </tr>
  
 <tr valign="top">
  <th align="right"> Description
  </th>
  <td colspan="3">
   <textarea name="description:text" rows="3"
             cols="50"
       tal:content="here/description">
   </textarea>
  </td>
 </tr>
  
 <tr valign="top">
  <th align="right"> Collector Email
  </th>
  <td colspan="3"
      tal:define="member python:
                         here.portal_membership.getAuthenticatedMember();
                  getpropemail python: hasattr(member, 'getProperty')
                                       and member.getProperty('email', '');
                  attremail python: getattr(member, 'email', '');
                  email python: getattr(here, 'email', 
                                        getpropemail or attremail)">
          <table>
            <tr>
              <td>
                <input type="text" name="email" size=30
                       value="EMAIL"
                       tal:attributes="value email">
              </td>
              <td>
                <font color="gray"> "From" address for notifications </font>
              </td>
            </tr>
          </table>
  </td>
 </tr>
  
 <tr valign="top">
  <th> </th>
  <td colspan="3">
       <font color="gray"> <em> Note that staff changes cause reindexing of
              all issues, so catalog local-roles/visibility caching
              tracks - it'll take a while! </em>
       </font>
  </td>
 </tr>
  
 <tr valign="top">
  <th align="right"> Managers
  </th>
  <td>
   <textarea name="managers:lines" rows="5" cols="15">
<span tal:repeat="it here/managers" tal:replace="it"></span>
</textarea>
  </td>
  <td colspan="2">
          <font color="gray"> Managers configure the collector, and receive
            new requests.  Managers can accept issues, but must be on
            Supporters roster to be assigned.  (Managers may remove
            <em>themselves</em> from management roster - they must have
            another manager do so.)
          </font>
  </td>
 </tr>

 <tr>
  <th align="right"> Supporters
  </th>
  <td>
   <textarea name="supporters:lines" rows="5" cols="15">
<span tal:repeat="it here/supporters" tal:replace="it"></span>
</textarea>
  </td>
  <td colspan="2">
          <font color="gray"> Supporters can be assigned to requests.  They
            may or may not receive initial request notifications, depending on
            the "dispatching" setting below.
          </font>
  </td>
 </tr>

 <tr valign="top">
  <th align="right"> Dispatcher Mode
  </th>
  <td colspan="3">
    <input type="radio" name="dispatching:int" value="0"
           tal:attributes="checked not: here/dispatching|nothing">
          Off
            <font color="gray">
              Managers and supporters receive pending-issue notices </font>
    <br>
    <input type="radio" name="dispatching:int" value="1"
           tal:attributes="checked here/dispatching|nothing">
          On
            <font color="gray">
              Only managers recieve pending-issue notices </font>
  </td>
 </tr>
  
 <tr valign="top">
  <th align="right"> Topics
  </th>
  <td>
   <textarea name="topics:lines" rows="5" cols="15">
<span tal:repeat="it here/topics|nothing" tal:replace="it"></span></textarea>
  </td>
  <th align="right"> Classifications
  </th>
  <td>
   <textarea name="classifications:lines" rows="5" cols="15">
<span tal:repeat="it here/classifications|nothing" tal:replace="it">
</span></textarea>
  </td>
 </tr>
  
 <tr valign="top">
  <th align="right"> Importance
  </th>
  <td>
   <textarea name="importances:lines" rows="5" cols="15">
<span tal:repeat="it here/importances|nothing" tal:replace="it">
</span></textarea>
  </td>
 </tr>
  
 <tr valign="top">
  <th align="right"> Version Info Spiel </th>
  <td colspan=3>
    <font size="-1" color="gray"> Something to prompt requesters for useful
    version info... </font>
    <br> 
   <textarea name="version_info_spiel:text" rows="3" cols="50">
<span tal:replace="here/version_info_spiel|nothing">
</span></textarea>
  </td>
 </tr>

 <tr valign="top">
  <th> Reinstate catalog </th>
  <td colspan="4">
    <font color="gray">
      Some product updates require reinstating the catalog and reindexing
      issues - rare!  Collector product RELEASE_NOTES.txt will advise when
      necessary.
    </font>
    <br>
    <input type="radio" name="recatalog:int" value="0" CHECKED>No
    <input type="radio" name="recatalog:int" value="1">Internal only
    <input type="radio" name="recatalog:int" value="2">Internal & Site-wide
    (<em>slow</em>)
  </td>
 </tr>

 <tr valign="top">
  <td> &nbsp; </td>
 </tr>

 <tr valign="top">
  <td> <br> </td>
  <td>
   <input type="submit" value=" Submit ">
   <input type="reset" value=" Reset ">
  </td>
 </tr>

 
</table>
</form>
</div>
</body>
</html>

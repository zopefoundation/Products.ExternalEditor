<tal:page
   xmlns:tal="http://xml.zope.org/namespaces/tal"
   xmlns:metal="http://xml.zope.org/namespaces/metal"
   xmlns:i18n="http://xml.zope.org/namespaces/i18n"
   tal:define="control python: here.join_control(**request.form)"
><html metal:use-macro="here/main_template/macros/master">
<body>

<metal:block metal:fill-slot="header" i18n:domain="cmf_default">
<h1 tal:content="control/title" i18n:translate="">Become a member</h1>
</metal:block>

<metal:block metal:fill-slot="main" i18n:domain="cmf_default">
<div class="Desktop">

<tal:case tal:condition="control/isOrdinaryMember">
  <p i18n:translate=""> You are already a member. You may use the
      <a href="personalize_form">personalization form</a>
       to change your membership information. </p>
</tal:case>

<tal:case tal:condition="control/isNewMember">
<p i18n:translate="">You have been registered as a member.</p>

<p tal:condition="control/validate_email" i18n:translate="">You will receive
  an email shortly containing your password and instructions on how to
  activate your membership.</p>

<tal:case tal:condition="not: control/validate_email">
<p>Click the button to log in immediately.</p>
<form action="logged_in" method="post"
      tal:attributes="action string:${control/portal_url}/logged_in">
<input type="hidden" name="__ac_name"  value=""
       tal:attributes="value control/member_id" />
<input type="hidden" name="__ac_password" value=""
       tal:attributes="value control/password" />
<input type="submit" name="login" value="Log in"
       i18n:attributes="value" />
</form>
</tal:case>

<p><a href="" tal:attributes="href string:${control/portal_url}"
      i18n:translate="">Return to homepage</a></p>
</tal:case>

<tal:case tal:condition="control/isAnon">
  <p i18n:translate="">Becoming a member gives you the ability to personalize
    the site and participate in the community.</p>

  <p i18n:translate="">It does not cost any money to become a member and your
    email and other personal information will remain private.</p>

  <p tal:condition="control/validate_email" i18n:translate="">
      You must submit a valid email address. This address will be used
      to send you a randomly-generated password.  Once you have logged
      in with this password, you may change it to anything you like.</p>
</tal:case>

<tal:case tal:condition="control/isAnonOrUserManager">
  <form action="join_form" method="post"
        tal:attributes="action string:${control/portal_url}/join_form">
   <table class="FormLayout">
    <tr>
     <th i18n:translate="">Member ID</th>
     <td>
      <input type="text" name="member_id" size="30" value=""
             tal:attributes="value control/member_id" />
     </td>
    </tr>
    <tr>
     <th i18n:translate="">Email Address</th>
     <td>
      <input type="text" name="member_email" size="30" value=""
             tal:attributes="value control/member_email" />
     </td>
    </tr><tal:case tal:condition="not: control/validate_email">
    <tr>
     <th i18n:translate="">Password</th>
     <td>
      <input type="password" name="password" size="30" />
     </td>
    </tr>
    <tr>
     <th i18n:translate="">Password (confirm)</th>
     <td>
      <input type="password" name="confirm" size="30" />
     </td>
    </tr>
    <tr>
     <th i18n:translate="">Mail Password?</th>
     <td>
      <input type="checkbox" name="send_password" id="cb_send_password"
             tal:attributes="checked control/send_password" />
      <em><label for="cb_send_password" i18n:translate="">Check this box to
        have the password mailed.</label></em>
     </td>
    </tr></tal:case>
    <tr>
     <td>&nbsp;</td>
     <td>
      <input type="submit" name="add" value="Register"
             i18n:attributes="value" />
      <input type="submit" name="cancel" value="Cancel"
             i18n:attributes="value" />
     </td>
    </tr>
   </table>
  </form>
</tal:case>

</div>
</metal:block>

</body>
</html></tal:page>
